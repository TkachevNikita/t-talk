import{a as C,b as se,c as pe}from"./chunk-2H4KAAUC.js";import{a as ie,d as re,e as le,f as ae,g as ue}from"./chunk-QTXSFNCZ.js";import{d as ne}from"./chunk-JKVJCI6Z.js";import{Ca as Z,L as J,N as Q,R as X,Wa as ee,Xa as te,ga as Y,j,l as H,o as q,s as K,w as W,y as G}from"./chunk-O5ZP3LPP.js";import{$ as x,$a as p,Dc as oe,Ha as d,Ja as O,K as k,Ka as s,La as c,Ma as M,Na as f,Oa as L,Pa as A,Pb as R,Qa as F,Qb as z,Ra as l,Sa as r,Ta as m,W as _,Xa as I,Xb as V,_a as U,ba as P,ga as b,ha as w,hb as a,ia as E,jb as y,kb as B,l as S,la as T,ob as N,pb as g,ta as D,tb as v,ub as h,vb as $,wa as n}from"./chunk-TQQFZRDT.js";var me=[{opacity:.06},{opacity:1}],fe=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=x({type:e,selectors:[["ng-component"]],hostAttrs:[1,"tui-skeleton-styles"],standalone:!0,features:[g],decls:0,vars:0,template:function(i,o){},styles:[`@keyframes tuiSkeleton{0%{opacity:.03}to{opacity:.06}}[tuiSkeleton]._skeleton{color:transparent;background:var(--tui-background-base)!important;box-shadow:none!important;filter:contrast(0) brightness(0);animation:tuiSkeleton ease-in-out 1s infinite alternate;-webkit-user-select:none;user-select:none;pointer-events:none}[tuiSkeleton]._skeleton[data-tui-skeleton]{background:transparent!important}[tuiSkeleton]._skeleton[data-tui-skeleton]:before{content:attr(data-tui-skeleton);background:var(--tui-background-base);font-size:smaller;-webkit-box-decoration-break:clone;box-decoration-break:clone;border-radius:.25rem}[tuiTheme=dark] [tuiSkeleton]._skeleton,[tuiTheme=dark][tuiSkeleton]._skeleton{filter:contrast(0) brightness(0) invert(1)}
`],encapsulation:2,changeDetection:0})}}return e})(),de=(()=>{class e{constructor(){this.el=X(),this.duration=_(Z)*te*2,this.nothing=Q(fe),this.tuiSkeleton=!1}ngOnChanges({tuiSkeleton:t}){this.animation?.cancel(),!t?.currentValue&&!t?.firstChange&&(this.animation=this.el.animate(me,this.duration))}getPlaceholder(t){switch(typeof t){case"number":return Array.from({length:t}).map(()=>Y.repeat(ve())).join(" ");case"string":return t;default:return null}}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275dir=P({type:e,selectors:[["","tuiSkeleton",""]],hostAttrs:["tuiSkeleton",""],hostVars:3,hostBindings:function(i,o){i&2&&(O("data-tui-skeleton",o.getPlaceholder(o.tuiSkeleton)),M("_skeleton",o.tuiSkeleton))},inputs:{tuiSkeleton:"tuiSkeleton"},standalone:!0,features:[b]})}}return S([J],e.prototype,"getPlaceholder",null),e})();function ve(){return Math.floor(Math.random()*11)+5}function xe(e,u){e&1&&a(0," \u041C\u0443\u0436\u0441\u043A\u043E\u0439 ")}function ge(e,u){e&1&&a(0," \u0416\u0435\u043D\u0441\u043A\u0438\u0439 ")}function he(e,u){if(e&1&&(l(0,"div",13)(1,"h1",14),a(2),r()(),l(3,"div",15)(4,"span"),a(5,"\u0414\u0430\u0442\u0430 \u0440\u043E\u0436\u0434\u0435\u043D\u0438\u044F:"),r(),a(6),v(7,"date"),r(),l(8,"div",15)(9,"span"),a(10,"\u041F\u043E\u043B:"),r(),d(11,xe,1,0)(12,ge,1,0),r(),l(13,"div",15)(14,"span"),a(15,"\u041E \u0441\u0435\u0431\u0435:"),r(),a(16),r()),e&2){let t,i=p().tuiLet,o=p().tuiLet;n(),s("tuiSkeleton",i?10:0),n(),B(" ",o==null?null:o.firstName," ",o==null?null:o.secondName," "),n(),s("tuiSkeleton",i&&10),n(),c("font-weight",600),n(2),y(" ",$(7,15,o==null?null:o.birthDate,"dd.MM.yyyy")," "),n(2),s("tuiSkeleton",i&&5),n(),c("font-weight",600),n(2),f((t=o==null?null:o.gender)===0?11:t===1?12:-1),n(2),s("tuiSkeleton",i&&40),n(),c("font-weight",600),n(2),y(" ",o==null?null:o.bio," ")}}function ye(e,u){e&1&&a(0," 404 \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u0430 ")}function Ce(e,u){e&1&&(l(0,"button",16),m(1,"tui-icon",17),a(2," \u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C "),r()),e&2&&c("margin-left","auto")("align-self","flex-start")}function Se(e,u){if(e&1){let t=I();l(0,"div",18),m(1,"tui-avatar",19),l(2,"tui-textarea",20),a(3," \u0427\u0442\u043E \u0443 \u0432\u0430\u0441 \u043D\u043E\u0432\u043E\u0433\u043E? "),r()(),l(4,"button",21),U("click",function(){w(t);let o=p(2).tuiLet,ce=p();return E(ce.createPost(o.uid))}),a(5," \u041E\u0442\u043F\u0440\u0430\u0432\u0438\u0442\u044C "),r()}if(e&2){let t=p(2).tuiLet,i=p();n(),s("src",t==null?null:t.profilePictureId),n(),c("width","100%"),s("formControl",i.postControl),n(2),c("align-self","flex-end")("margin-top","20px"),s("disabled",i.postControl.invalid)}}function ke(e,u){e&1&&(l(0,"div",23),m(1,"tui-icon",25),a(2," \u041D\u0430 \u0441\u0442\u0435\u043D\u0435 \u043F\u043E\u043A\u0430 \u043D\u0435\u0442 \u043D\u0438 \u043E\u0434\u043D\u043E\u0439 \u0437\u0430\u043F\u0438\u0441\u0438 "),r()),e&2&&(n(),c("font-size","48px")("font-weight","600"))}function Pe(e,u){if(e&1&&m(0,"lib-profile-post",24),e&2){let t=u.$implicit;s("post",t)}}function be(e,u){if(e&1&&(l(0,"div",22),d(1,ke,3,4,"div",23),A(2,Pe,1,1,"lib-profile-post",24,L),r()),e&2){let t=u.tuiLet;n(),f((t==null?null:t.length)===0?1:-1),n(),F(t)}}function we(e,u){if(e&1&&(l(0,"div",3)(1,"div",4),m(2,"img",5),l(3,"div",6),d(4,he,17,18)(5,ye,1,0),r(),d(6,Ce,3,4,"button",7),r(),l(7,"div",8)(8,"div",9),d(9,Se,6,9)(10,be,4,1,"div",10),v(11,"async"),r(),l(12,"div",11)(13,"h2"),a(14,"\u041F\u043E\u0434\u043F\u0438\u0441\u043A\u0438"),r(),m(15,"div",12),r()()()),e&2){let t=u.tuiLet,i=p().tuiLet,o=p();n(2),s("src",i==null?null:i.profilePictureId,D)("tuiSkeleton",t),n(2),f(t||i?4:5),n(2),f(o.isCurrentUser?6:-1),n(3),f(o.isCurrentUser?9:-1),n(),s("tuiLet",h(11,6,o.posts$))}}function Ee(e,u){if(e&1&&(l(0,"div",1),d(1,we,16,8,"div",2),v(2,"async"),r()),e&2){let t=p();n(),s("tuiLet",h(2,1,t.isUserLoading$))}}var rt=(()=>{class e{activatedRoute=_(V);destroyRef=_(T);userService=_(se);postService=_(C);isCurrentUser=!1;posts$;isPostLoading$=this.postService.isLoading;user$;isUserLoading$=this.userService.isUserLoading;postControl=new q("",{nonNullable:!0,validators:[j.required]});ngOnInit(){this.activatedRoute.params.pipe(G(this.destroyRef)).subscribe({next:t=>{this.user$=this.userService.isCurrentUserProfile(t.id).pipe(k(i=>(this.isCurrentUser=i,this.posts$=this.postService.getPostsByUserId(t.id),i?this.userService.getUserData():this.userService.getUserById(t.id))))}})}createPost(t){this.posts$=this.postService.createPost({authorId:t,content:this.postControl.value,createdAt:oe.now()}),this.postControl.reset()}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=x({type:e,selectors:[["lib-profile-overview"]],standalone:!0,features:[N([C]),g],decls:2,vars:3,consts:[["class","profile",4,"tuiLet"],[1,"profile"],["class","profile__container",4,"tuiLet"],[1,"profile__container"],[1,"profile__head"],["alt","avatar",1,"profile__avatar",3,"src","tuiSkeleton"],[1,"profile__info"],["size","s","tuiButton","","type","button",3,"margin-left","align-self"],[1,"profile__body"],[1,"profile__posts"],["class","profile__posts--list",4,"tuiLet"],[1,"profile__subs","profile-block"],[1,"profile__subs--list"],[1,"profile__group"],[3,"tuiSkeleton"],[1,"profile__group",3,"tuiSkeleton"],["size","s","tuiButton","","type","button"],["icon","@tui.pencil"],[1,"profile__posts--input"],["size","s",3,"src"],[3,"formControl"],["size","m","tuiButton","","type","button",3,"click","disabled"],[1,"profile__posts--list"],[1,"profile__posts--empty"],[3,"post"],["icon","@tui.gallery-vertical-end"]],template:function(i,o){i&1&&(d(0,Ee,3,3,"div",0),v(1,"async")),i&2&&s("tuiLet",h(1,1,o.user$))},dependencies:[R,z,pe,W,H,K,re,ee,ne,ie,de,ue,le,ae],styles:["[_nghost-%COMP%]{height:100%;width:100%}.profile[_ngcontent-%COMP%]{display:flex;justify-content:center}.profile-block[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;border:1px solid #d9d9d9;border-radius:32px;padding:30px}.profile__avatar[_ngcontent-%COMP%]{width:300px;height:250px;border-radius:32px}.profile__head[_ngcontent-%COMP%]{display:flex;gap:40px;align-items:center}.profile__container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:40px;max-width:1200px;width:100%}.profile__info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:70%}.profile__subs[_ngcontent-%COMP%]{width:30%;height:200px}.profile__posts[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}.profile__posts--list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:50px;margin-top:30px;padding:0 30px}.profile__posts--empty[_ngcontent-%COMP%]{margin-top:40px;display:flex;flex-direction:column;align-items:center;gap:20px;font-size:20px}.profile__posts--input[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:10px}.profile__body[_ngcontent-%COMP%]{display:flex;gap:40px}"],changeDetection:0})}return e})();export{rt as ProfileOverviewComponent};
